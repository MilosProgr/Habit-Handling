import{r as C,j as d}from"./index-B3dhMxy4.js";import{a as y,i as A}from"./KcPage-BzEec5nu.js";import{u as _}from"./useIsPasswordRevealed-COVRf786.js";Array.prototype.every||(Array.prototype.every=function(i,e){var t,n;if(this==null)throw new TypeError("this is null or not defined");var r=Object(this),o=r.length>>>0;if(typeof i!="function"&&Object.prototype.toString.call(i)!=="[object Function]")throw new TypeError;for(arguments.length>1&&(t=e),n=0;n<o;){var l;if(n in r){var u;if(l=r[n],t?u=i.call(t,l,n,r):u=i(l,n,r),!u)return!1}n++}return!0});const F=(i,e)=>{if(!i)return"";const t=e.match(/{\d+}/g);if(!t)return"";const n=t.reduce((a,s)=>a+parseInt(s.replace("{","").replace("}","")),0);let r=i.replace(/\D+/g,"");if(parseInt(r)!=r)return"";r.length>n&&(r=r.substring(0,n));const o=t.reduce((a,s)=>a+`(\\d${s})`,"^");let l=new RegExp(o).exec(r);if(!l)return i;let u=e;for(let a=0;a<t.length;a++)u=u.replace(t[a],l[a+1]);return u},B=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;let j;const $=new WeakSet,P="kcNumberUnFormat",E=`input[data-${P}]`;function q(){j==null||j();const i=t=>{if($.has(t))return;const n=t.closest("form");n!==null&&(n.addEventListener("submit",()=>{const r=t.getAttribute(`data-${P}`);r&&(t.value=H(t.value,r))}),$.add(t))};document.querySelectorAll(E).forEach(t=>{y(t instanceof HTMLInputElement),i(t)});const e=new MutationObserver(t=>{for(const n of t)n.type==="childList"&&n.addedNodes.length>0&&n.addedNodes.forEach(r=>{if(r.nodeType===Node.ELEMENT_NODE){const o=r.querySelector(E);o!==null&&(y(o instanceof HTMLInputElement),i(o))}})});e.observe(document.body,{childList:!0,subtree:!0}),j=()=>e.disconnect()}const H=(i,e)=>{if(!i)return"";const t=e.match(/{\d+}/g);if(!t)return"";const n=t.reduce((a,s)=>a+parseInt(s.replace("{","").replace("}","")),0);let r=i.replace(/\D+/g,"");if(parseInt(r)!=r)return"";r.length>n&&(r=r.substring(0,n));const o=t.reduce((a,s)=>a+`(\\d${s})`,"^");let l=new RegExp(o).exec(r);if(!l)return i;let u=e;for(let a=0;a<t.length;a++)u=u.replace(t[a],l[a+1]);return u};function S(i){return!(i instanceof Object)||typeof i=="function"?i:i instanceof Array?i.map(S):Object.fromEntries(Object.entries(i).map(([e,t])=>[e,S(t)]))}var z=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};y();const T=new WeakMap;function W(i){const{kcContext:e}=i;e:{const n=T.get(e);if(n===void 0)break e;return n}const t=G(i);return T.set(e,t),t}function G(i){const{kcContext:e,doMakeUserConfirmPassword:t}=i;q();let n=K({kcContext:e});const r=new Set;return{dispatchFormAction:o=>{n=M({action:o,kcContext:e,doMakeUserConfirmPassword:t,state:n}),r.forEach(l=>l())},getFormState:()=>J({state:n}),subscribeToFormState:o=>(r.add(o),{unsubscribe:()=>{r.delete(o)}})}}function K(i){var e,t;const{kcContext:n}=i,{getErrors:r}=L({kcContext:n}),o=(()=>{var a;e:{if("profile"in n&&"attributesByName"in n.profile&&Object.keys(n.profile.attributesByName).length!==0)break e;if("register"in n&&n.register instanceof Object&&"formData"in n.register)return["firstName","lastName","email","username"].filter(s=>s!=="username"?!0:!n.realm.registrationEmailAsUsername).map(s=>{var h;return A({name:s,displayName:A(`\${${s}}`),required:!0,value:(h=n.register.formData[s])!==null&&h!==void 0?h:"",html5DataAnnotations:{},readOnly:!1,validators:{},annotations:{},autocomplete:(()=>{switch(s){case"email":return"email";case"username":return"username";default:return}})()})});if("user"in n&&n.user instanceof Object)return["username","email","firstName","lastName"].filter(s=>s!=="username"?!0:n.user.editUsernameAllowed).map(s=>{var h;return A({name:s,displayName:A(`\${${s}}`),required:!0,value:(h=n.user[s])!==null&&h!==void 0?h:"",html5DataAnnotations:{},readOnly:!1,validators:{},annotations:{},autocomplete:(()=>{switch(s){case"email":return"email";case"username":return"username";default:return}})()})});if("email"in n&&n.email instanceof Object)return[A({name:"email",displayName:A("${email}"),required:!0,value:(a=n.email.value)!==null&&a!==void 0?a:"",html5DataAnnotations:{},readOnly:!1,validators:{},annotations:{},autocomplete:"email"})];y(!1,"Unable to mock user profile from the current kcContext")}return Object.values(n.profile.attributesByName).map(S)})();e:{if(n.locale===void 0||o.find(a=>a.name==="locale")!==void 0)break e;o.push(A({validators:{},displayName:"locale",values:[],annotations:{},required:!1,html5DataAnnotations:{},multivalued:!1,readOnly:!1,name:"locale"}))}o.forEach(a=>{var s,h,c;a.name==="locale"&&(y(n.locale!==void 0),a.annotations.inputType="hidden",a.value=n.locale.currentLanguageTag,delete a.values);e:{if(typeof a.group!="string")break e;const{group:k,groupDisplayHeader:v,groupDisplayDescription:b,groupAnnotations:O}=a;if(delete a.group,delete a.groupDisplayHeader,delete a.groupDisplayDescription,delete a.groupAnnotations,k==="")break e;a.group={name:k,displayHeader:v,displayDescription:b,annotations:O,html5DataAnnotations:{}}}a.validators.options!==void 0&&a.annotations.inputType===void 0&&(a.annotations.inputType="select"),N({attribute:a})&&(a.multivalued=!0),a.multivalued?((s=a.values)!==null&&s!==void 0||(a.values=a.value!==void 0?[a.value]:[]),delete a.value):((h=a.value)!==null&&h!==void 0||(a.value=(c=a.values)===null||c===void 0?void 0:c[0]),delete a.values)});e:{if(!n.passwordRequired)break e;o.forEach((a,s)=>{a.name===(n.realm.registrationEmailAsUsername?"email":"username")&&o.splice(s+1,0,{name:"password",displayName:A("${password}"),required:!0,readOnly:!1,validators:{},annotations:{},autocomplete:"new-password",html5DataAnnotations:{}},{name:"password-confirm",displayName:A("${passwordConfirm}"),required:!0,readOnly:!1,validators:{},annotations:{},html5DataAnnotations:{},autocomplete:"new-password"})})}const l=[];for(const a of o){e:{if(!a.multivalued)break e;const s=!((e=a.values)===null||e===void 0)&&e.length?a.values:[""];n:{if(N({attribute:a}))break n;const h=a.validators.multivalued;if(h===void 0)break n;const{min:c}=h;if(!c)break n;const k=parseInt(`${c}`);for(let v=s.length;v<k;v++)s.push("")}l.push({attribute:a,valueOrValues:s});continue}l.push({attribute:a,valueOrValues:(t=a.value)!==null&&t!==void 0?t:""})}return{formFieldStates:l.map(({attribute:a,valueOrValues:s})=>({attribute:a,errors:r({attributeName:a.name,formFieldStates:l}),hasLostFocusAtLeastOnce:s instanceof Array&&!N({attribute:a})?s.map(()=>!1):!1,valueOrValues:s}))}}const Z=new WeakMap;function J(i){const{state:e}=i;e:{const t=Z.get(e);if(t===void 0)break e;return t}return{formFieldStates:e.formFieldStates.map(t=>{var{errors:n,hasLostFocusAtLeastOnce:r,attribute:o}=t,l=z(t,["errors","hasLostFocusAtLeastOnce","attribute"]);return Object.assign({displayableErrors:n.filter(u=>{const a=typeof r=="boolean"?r:u.fieldIndex!==void 0?r[u.fieldIndex]:r[r.length-1];switch(u.source.type){case"server":return!0;case"other":switch(u.source.rule){case"requiredField":return a;case"passwordConfirmMatchesPassword":return a}y(!1);case"passwordPolicy":switch(u.source.name){case"length":return a;case"maxLength":return a;case"digits":return a;case"lowerCase":return a;case"upperCase":return a;case"specialChars":return a;case"notUsername":return!0;case"notEmail":return!0}y(!1);case"validator":switch(u.source.name){case"length":return a;case"pattern":return a;case"email":return a;case"integer":return a;case"multivalued":return a;case"options":return a}y(!1)}}),attribute:o},l)}),isFormSubmittable:e.formFieldStates.every(({errors:t})=>t.length===0)}}function M(i){const{kcContext:e,doMakeUserConfirmPassword:t,action:n}=i;let{state:r}=i;const{getErrors:o}=L({kcContext:e}),l=r.formFieldStates.find(({attribute:u})=>u.name===n.name);return y(l!==void 0),(()=>{var u;switch(n.action){case"update":l.valueOrValues=n.valueOrValues;e:{const{attribute:a}=l,{kcNumberFormat:s}=(u=a.html5DataAnnotations)!==null&&u!==void 0?u:{};if(!s)break e;l.valueOrValues instanceof Array?l.valueOrValues=l.valueOrValues.map(h=>F(h,s)):l.valueOrValues=F(l.valueOrValues,s)}l.errors=o({attributeName:n.name,formFieldStates:r.formFieldStates});e:{const{displayErrorsImmediately:a=!1}=n;if(!a)break e;for(const s of n.valueOrValues instanceof Array?n.valueOrValues.map((...[,h])=>h):[void 0])r=M({state:r,kcContext:e,doMakeUserConfirmPassword:t,action:{action:"focus lost",name:n.name,fieldIndex:s}})}e:{if(t||n.name!=="password")break e;r=M({state:r,kcContext:e,doMakeUserConfirmPassword:t,action:{action:"update",name:"password-confirm",valueOrValues:n.valueOrValues,displayErrorsImmediately:n.displayErrorsImmediately}})}e:{if(!t||n.name!=="password")break e;r=M({state:r,kcContext:e,doMakeUserConfirmPassword:t,action:{action:"update",name:"password-confirm",valueOrValues:(()=>{const a=r.formFieldStates.find(({attribute:s})=>s.name==="password-confirm");return y(a!==void 0),a.valueOrValues})(),displayErrorsImmediately:n.displayErrorsImmediately}})}return;case"focus lost":if(l.hasLostFocusAtLeastOnce instanceof Array){const{fieldIndex:a}=n;y(a!==void 0),l.hasLostFocusAtLeastOnce[a]=!0;return}l.hasLostFocusAtLeastOnce=!0;return}y(!1)})(),Object.assign({},r)}function L(i){const{kcContext:e}=i,{messagesPerField:t,passwordPolicies:n}=e;function r(o){var l,u;const{attributeName:a,formFieldStates:s}=o,h=s.find(({attribute:f})=>f.name===a);y(h!==void 0);const{attribute:c}=h,k=(()=>{var f;let{valueOrValues:p}=h;e:{const{kcNumberUnFormat:m}=(f=c.html5DataAnnotations)!==null&&f!==void 0?f:{};if(!m)break e;p instanceof Array?p=p.map(g=>F(g,m)):p=F(p,m)}return p})();y(c!==void 0);e:{if(c.multivalued){const m=!((l=c.values)===null||l===void 0)&&l.length?c.values:[""];y(k instanceof Array);const g=k;if(JSON.stringify(m)!==JSON.stringify(g.slice(0,m.length)))break e}else{const m=(u=c.value)!==null&&u!==void 0?u:"";if(y(typeof k=="string"),m!==k)break e}let f;try{f=t.existsError(a)}catch{break e}if(!f)break e;return[{advancedMsgArgs:[t.get(a)],fieldIndex:void 0,source:{type:"server"}}]}e:{if(!c.multivalued||N({attribute:c}))break e;y(k instanceof Array);const f=k,p=f.map((...[,m])=>r({attributeName:a,formFieldStates:s.map(x=>x.attribute.name===a?(y(x.valueOrValues instanceof Array),{attribute:Object.assign(Object.assign({},c),{annotations:Object.assign(Object.assign({},c.annotations),{inputType:void 0}),multivalued:!1}),valueOrValues:x.valueOrValues[m]}):x)}).filter(x=>!(x.source.type==="other"&&x.source.rule==="requiredField")).map(x=>Object.assign(Object.assign({},x),{fieldIndex:m}))).reduce((m,g)=>[...m,...g],[]);n:{if(!c.required||f.every(m=>m!==""))break n;p.push({advancedMsgArgs:["error-user-attribute-required"],fieldIndex:void 0,source:{type:"other",rule:"requiredField"}})}return p}e:{if(!c.multivalued||!N({attribute:c}))break e;const f="multivalued",p=c.validators[f];if(p===void 0)return[];const{min:m}=p,g=m?parseInt(`${m}`):c.required?1:0;y(!isNaN(g));const{max:x}=p,I=x?parseInt(`${x}`):1/0;y(!isNaN(I)),y(k instanceof Array);const w=k;return g<=w.length&&w.length<=I?[]:[{advancedMsgArgs:["error-invalid-multivalued-size",`${g}`,`${I}`],fieldIndex:void 0,source:{type:"validator",name:f}}]}y(typeof k=="string");const v=k,b=[];e:{if(a!=="password"||n===void 0)break e;n:{const f="length",p=n[f];if(!p)break n;const m=p;if(v.length>=m)break n;b.push({advancedMsgArgs:["invalidPasswordMinLengthMessage",`${m}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:f}})}n:{const f="maxLength",p=n[f];if(!p)break n;const m=p;if(v.length<=m)break n;b.push({advancedMsgArgs:["invalidPasswordMaxLengthMessage",`${m}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:f}})}n:{const f="digits",p=n[f];if(!p)break n;const m=p;if(v.split("").filter(g=>!isNaN(parseInt(g))).length>=m)break n;b.push({advancedMsgArgs:["invalidPasswordMinDigitsMessage",`${m}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:f}})}n:{const f="lowerCase",p=n[f];if(!p)break n;const m=p;if(v.split("").filter(g=>g===g.toLowerCase()&&g!==g.toUpperCase()).length>=m)break n;b.push({advancedMsgArgs:["invalidPasswordMinLowerCaseCharsMessage",`${m}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:f}})}n:{const f="upperCase",p=n[f];if(!p)break n;const m=p;if(v.split("").filter(g=>g===g.toUpperCase()&&g!==g.toLowerCase()).length>=m)break n;b.push({advancedMsgArgs:["invalidPasswordMinUpperCaseCharsMessage",`${m}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:f}})}n:{const f="specialChars",p=n[f];if(!p)break n;const m=p;if(v.split("").filter(g=>!g.match(/[a-zA-Z0-9]/)).length>=m)break n;b.push({advancedMsgArgs:["invalidPasswordMinSpecialCharsMessage",`${m}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:f}})}n:{const f="notUsername";if(!n[f])break n;const m=s.find(x=>x.attribute.name==="username");if(!m)break n;const g=(()=>{var x;let{valueOrValues:I}=m;y(typeof I=="string");a:{const{kcNumberUnFormat:w}=(x=m.attribute.html5DataAnnotations)!==null&&x!==void 0?x:{};if(!w)break a;I=F(I,w)}return I})();if(g===""||v!==g)break n;b.push({advancedMsgArgs:["invalidPasswordNotUsernameMessage"],fieldIndex:void 0,source:{type:"passwordPolicy",name:f}})}n:{const f="notEmail";if(!n[f])break n;const m=s.find(g=>g.attribute.name==="email");if(!m)break n;y(typeof m.valueOrValues=="string");{const g=m.valueOrValues;if(g===""||v!==g)break n}b.push({advancedMsgArgs:["invalidPasswordNotEmailMessage"],fieldIndex:void 0,source:{type:"passwordPolicy",name:f}})}}e:{if(a!=="password-confirm")break e;const f=s.find(p=>p.attribute.name==="password");y(f!==void 0),y(typeof f.valueOrValues=="string");{const p=f.valueOrValues;if(v===p)break e}b.push({advancedMsgArgs:["invalidPasswordConfirmMessage"],fieldIndex:void 0,source:{type:"other",rule:"passwordConfirmMatchesPassword"}})}const{validators:O}=c;e:{if(!c.required||v!=="")break e;b.push({advancedMsgArgs:["error-user-attribute-required"],fieldIndex:void 0,source:{type:"other",rule:"requiredField"}})}e:{const f="length",p=O[f];if(!p)break e;const{"ignore.empty.value":m=!1,max:g,min:x}=p;if(m&&v==="")break e;const I={type:"validator",name:f};g&&v.length>parseInt(`${g}`)&&b.push({advancedMsgArgs:["error-invalid-length-too-long",`${g}`],fieldIndex:void 0,source:I}),x&&v.length<parseInt(`${x}`)&&b.push({advancedMsgArgs:["error-invalid-length-too-short",`${x}`],fieldIndex:void 0,source:I})}e:{const f="pattern",p=O[f];if(p===void 0)break e;const{"ignore.empty.value":m=!1,pattern:g,"error-message":x}=p;if(m&&v===""||new RegExp(g).test(v))break e;const I=[x??"shouldMatchPattern",g];b.push({advancedMsgArgs:I,fieldIndex:void 0,source:{type:"validator",name:f}})}e:{{const g=b[b.length-1];if(g!==void 0&&g.source.type==="validator"&&g.source.name==="pattern")break e}const f="email",p=O[f];if(p===void 0)break e;const{"ignore.empty.value":m=!1}=p;if(m&&v===""||B.test(v))break e;b.push({advancedMsgArgs:["invalidEmailMessage"],fieldIndex:void 0,source:{type:"validator",name:f}})}e:{const f="integer",p=O[f];if(p===void 0)break e;const{"ignore.empty.value":m=!1,max:g,min:x}=p;if(m&&v==="")break e;const I=parseInt(v),w={type:"validator",name:f};if(isNaN(I)){const R=["mustBeAnInteger"];b.push({advancedMsgArgs:R,fieldIndex:void 0,source:w});break e}if(g&&I>parseInt(`${g}`)){b.push({advancedMsgArgs:["error-number-out-of-range-too-big",`${g}`],fieldIndex:void 0,source:w});break e}if(x&&I<parseInt(`${x}`)){b.push({advancedMsgArgs:["error-number-out-of-range-too-small",`${x}`],fieldIndex:void 0,source:w});break e}}e:{const f="options",p=O[f];if(p===void 0||v===""||p.options.indexOf(v)>=0)break e;b.push({advancedMsgArgs:["notAValidOption"],fieldIndex:void 0,source:{type:"validator",name:f}})}return b}return{getErrors:r}}function N(i){var e,t;const{attribute:n}=i;return(t=(e=n.annotations.inputType)===null||e===void 0?void 0:e.startsWith("multiselect"))!==null&&t!==void 0?t:!1}function Q(i){const{attribute:e,values:t,fieldIndex:n}=i,r=(()=>{if(t.length===1)return!1;const l=(()=>{const{multivalued:u}=e.validators;if(u===void 0)return;const a=u.min;if(a!==void 0)return parseInt(`${a}`)})();return l===void 0?!0:t.length!==l})(),o=(()=>{if(n+1!==t.length)return!1;const l=(()=>{const{multivalued:u}=e.validators;if(u===void 0)return;const a=u.max;if(a!==void 0)return parseInt(`${a}`)})();return l===void 0?!0:t.length!==l})();return{hasRemove:r,hasAdd:o}}y();y();y();y();y();y();function X(i){const{doMakeUserConfirmPassword:e,i18n:t,kcContext:n}=i,r=W({kcContext:n,doMakeUserConfirmPassword:e}),[o,l]=C.useState(()=>r.getFormState());C.useEffect(()=>{const{unsubscribe:h}=r.subscribeToFormState(()=>{l(r.getFormState())});return()=>h()},[r]);const{advancedMsg:u,advancedMsgStr:a}=t;return{formState:C.useMemo(()=>({isFormSubmittable:o.isFormSubmittable,formFieldStates:o.formFieldStates.map(h=>({attribute:h.attribute,valueOrValues:h.valueOrValues,displayableErrors:h.displayableErrors.map((c,k)=>({errorMessage:d.jsx(C.Fragment,{children:u(...c.advancedMsgArgs)},`${h.attribute.name}-${k}`),errorMessageStr:a(...c.advancedMsgArgs),source:c.source,fieldIndex:c.fieldIndex}))}))}),[o]),dispatchFormAction:r.dispatchFormAction}}function ue(i){const{kcContext:e,i18n:t,kcClsx:n,onIsFormSubmittableValueChange:r,doMakeUserConfirmPassword:o,BeforeField:l,AfterField:u}=i,{advancedMsg:a}=t,{formState:{formFieldStates:s,isFormSubmittable:h},dispatchFormAction:c}=X({kcContext:e,i18n:t,doMakeUserConfirmPassword:o});C.useEffect(()=>{r(h)},[h]);const k={current:""};return d.jsx(d.Fragment,{children:s.map(({attribute:v,displayableErrors:b,valueOrValues:O})=>d.jsxs(C.Fragment,{children:[d.jsx(Y,{attribute:v,groupNameRef:k,i18n:t,kcClsx:n}),l!==void 0&&d.jsx(l,{attribute:v,dispatchFormAction:c,displayableErrors:b,valueOrValues:O,kcClsx:n,i18n:t}),d.jsxs("div",{className:n("kcFormGroupClass"),style:{display:v.annotations.inputType==="hidden"||v.name==="password-confirm"&&!o?"none":void 0},children:[d.jsxs("div",{className:n("kcLabelWrapperClass"),children:[d.jsx("label",{htmlFor:v.name,className:n("kcLabelClass"),children:a(v.displayName??"")}),v.required&&d.jsx(d.Fragment,{children:" *"})]}),d.jsxs("div",{className:n("kcInputWrapperClass"),children:[v.annotations.inputHelperTextBefore!==void 0&&d.jsx("div",{className:n("kcInputHelperTextBeforeClass"),id:`form-help-text-before-${v.name}`,"aria-live":"polite",children:a(v.annotations.inputHelperTextBefore)}),d.jsx(ee,{attribute:v,valueOrValues:O,displayableErrors:b,dispatchFormAction:c,kcClsx:n,i18n:t}),d.jsx(D,{attribute:v,displayableErrors:b,kcClsx:n,fieldIndex:void 0}),v.annotations.inputHelperTextAfter!==void 0&&d.jsx("div",{className:n("kcInputHelperTextAfterClass"),id:`form-help-text-after-${v.name}`,"aria-live":"polite",children:a(v.annotations.inputHelperTextAfter)}),u!==void 0&&d.jsx(u,{attribute:v,dispatchFormAction:c,displayableErrors:b,valueOrValues:O,kcClsx:n,i18n:t})]})]})]},v.name))})}function Y(i){var l,u;const{attribute:e,groupNameRef:t,i18n:n,kcClsx:r}=i,{advancedMsg:o}=n;return((l=e.group)==null?void 0:l.name)!==t.current&&(t.current=((u=e.group)==null?void 0:u.name)??"",t.current!=="")?(y(e.group!==void 0),d.jsxs("div",{className:r("kcFormGroupClass"),...Object.fromEntries(Object.entries(e.group.html5DataAnnotations).map(([a,s])=>[`data-${a}`,s])),children:[(()=>{const a=e.group.displayHeader??"",s=a!==""?o(a):e.group.name;return d.jsx("div",{className:r("kcContentWrapperClass"),children:d.jsx("label",{id:`header-${e.group.name}`,className:r("kcFormGroupHeader"),children:s})})})(),(()=>{const a=e.group.displayDescription??"";if(a!==""){const s=o(a);return d.jsx("div",{className:r("kcLabelWrapperClass"),children:d.jsx("label",{id:`description-${e.group.name}`,className:r("kcLabelClass"),children:s})})}return null})()]})):null}function D(i){const{attribute:e,fieldIndex:t,kcClsx:n}=i,r=i.displayableErrors.filter(o=>o.fieldIndex===t);return r.length===0?null:d.jsx("span",{id:`input-error-${e.name}${t===void 0?"":`-${t}`}`,className:n("kcInputErrorMessageClass"),"aria-live":"polite",children:r.filter(o=>o.fieldIndex===t).map(({errorMessage:o},l,u)=>d.jsxs(C.Fragment,{children:[o,u.length-1!==l&&d.jsx("br",{})]},l))})}function ee(i){const{attribute:e,valueOrValues:t}=i;switch(e.annotations.inputType){case"hidden":return d.jsx("input",{type:"hidden",name:e.name,value:t});case"textarea":return d.jsx(re,{...i});case"select":case"multiselect":return d.jsx(se,{...i});case"select-radiobuttons":case"multiselect-checkboxes":return d.jsx(te,{...i});default:{if(t instanceof Array)return d.jsx(d.Fragment,{children:t.map((...[,r])=>d.jsx(V,{...i,fieldIndex:r},r))});const n=d.jsx(V,{...i,fieldIndex:void 0});return e.name==="password"||e.name==="password-confirm"?d.jsx(ne,{kcClsx:i.kcClsx,i18n:i.i18n,passwordInputId:e.name,children:n}):n}}}function ne(i){const{kcClsx:e,i18n:t,passwordInputId:n,children:r}=i,{msgStr:o}=t,{isPasswordRevealed:l,toggleIsPasswordRevealed:u}=_({passwordInputId:n});return d.jsxs("div",{className:e("kcInputGroup"),children:[r,d.jsx("button",{type:"button",className:e("kcFormPasswordVisibilityButtonClass"),"aria-label":o(l?"hidePassword":"showPassword"),"aria-controls":n,onClick:u,children:d.jsx("i",{className:e(l?"kcFormPasswordVisibilityIconHide":"kcFormPasswordVisibilityIconShow"),"aria-hidden":!0})})]})}function V(i){const{attribute:e,fieldIndex:t,kcClsx:n,dispatchFormAction:r,valueOrValues:o,i18n:l,displayableErrors:u}=i,{advancedMsgStr:a}=l;return d.jsxs(d.Fragment,{children:[d.jsx("input",{type:(()=>{const{inputType:s}=e.annotations;return s!=null&&s.startsWith("html5-")?s.slice(6):s??"text"})(),id:e.name,name:e.name,value:t!==void 0?(y(o instanceof Array),o[t]):(y(typeof o=="string"),o),className:n("kcInputClass"),"aria-invalid":u.find(s=>s.fieldIndex===t)!==void 0,disabled:e.readOnly,autoComplete:e.autocomplete,placeholder:e.annotations.inputTypePlaceholder===void 0?void 0:a(e.annotations.inputTypePlaceholder),pattern:e.annotations.inputTypePattern,size:e.annotations.inputTypeSize===void 0?void 0:parseInt(`${e.annotations.inputTypeSize}`),maxLength:e.annotations.inputTypeMaxlength===void 0?void 0:parseInt(`${e.annotations.inputTypeMaxlength}`),minLength:e.annotations.inputTypeMinlength===void 0?void 0:parseInt(`${e.annotations.inputTypeMinlength}`),max:e.annotations.inputTypeMax,min:e.annotations.inputTypeMin,step:e.annotations.inputTypeStep,...Object.fromEntries(Object.entries(e.html5DataAnnotations??{}).map(([s,h])=>[`data-${s}`,h])),onChange:s=>r({action:"update",name:e.name,valueOrValues:t!==void 0?(y(o instanceof Array),o.map((h,c)=>c===t?s.target.value:h)):s.target.value}),onBlur:()=>r({action:"focus lost",name:e.name,fieldIndex:t})}),(()=>{if(t===void 0)return null;y(o instanceof Array);const s=o;return d.jsxs(d.Fragment,{children:[d.jsx(D,{attribute:e,kcClsx:n,displayableErrors:u,fieldIndex:t}),d.jsx(ae,{attribute:e,values:s,fieldIndex:t,dispatchFormAction:r,i18n:l})]})})()]})}function ae(i){const{attribute:e,values:t,fieldIndex:n,dispatchFormAction:r,i18n:o}=i,{msg:l}=o,{hasAdd:u,hasRemove:a}=Q({attribute:e,values:t,fieldIndex:n}),s=`-${e.name}-${n+1}`;return d.jsxs(d.Fragment,{children:[a&&d.jsxs(d.Fragment,{children:[d.jsx("button",{id:`kc-remove${s}`,type:"button",className:"pf-c-button pf-m-inline pf-m-link",onClick:()=>r({action:"update",name:e.name,valueOrValues:t.filter((h,c)=>c!==n)}),children:l("remove")}),u?d.jsx(d.Fragment,{children:" | "}):null]}),u&&d.jsx("button",{id:`kc-add${s}`,type:"button",className:"pf-c-button pf-m-inline pf-m-link",onClick:()=>r({action:"update",name:e.name,valueOrValues:[...t,""]}),children:l("addValue")})]})}function te(i){const{attribute:e,dispatchFormAction:t,kcClsx:n,i18n:r,valueOrValues:o}=i,{classDiv:l,classInput:u,classLabel:a,inputType:s}=(()=>{const{inputType:c}=e.annotations;switch(y(c==="select-radiobuttons"||c==="multiselect-checkboxes"),c){case"select-radiobuttons":return{inputType:"radio",classDiv:n("kcInputClassRadio"),classInput:n("kcInputClassRadioInput"),classLabel:n("kcInputClassRadioLabel")};case"multiselect-checkboxes":return{inputType:"checkbox",classDiv:n("kcInputClassCheckbox"),classInput:n("kcInputClassCheckboxInput"),classLabel:n("kcInputClassCheckboxLabel")}}})(),h=(()=>{var c;e:{const{inputOptionsFromValidation:k}=e.annotations;if(k===void 0)break e;const v=e.validators[k];if(v===void 0||v.options===void 0)break e;return v.options}return((c=e.validators.options)==null?void 0:c.options)??[]})();return d.jsx(d.Fragment,{children:h.map(c=>d.jsxs("div",{className:l,children:[d.jsx("input",{type:s,id:`${e.name}-${c}`,name:e.name,value:c,className:u,"aria-invalid":i.displayableErrors.length!==0,disabled:e.readOnly,checked:o instanceof Array?o.includes(c):o===c,onChange:k=>t({action:"update",name:e.name,valueOrValues:(()=>{const v=k.target.checked;if(o instanceof Array){const b=[...o];return v?b.push(c):b.splice(b.indexOf(c),1),b}return k.target.checked?c:""})()}),onBlur:()=>t({action:"focus lost",name:e.name,fieldIndex:void 0})}),d.jsx("label",{htmlFor:`${e.name}-${c}`,className:`${a}${e.readOnly?` ${n("kcInputClassRadioCheckboxLabelDisabled")}`:""}`,children:U(r,e,c)})]},c))})}function re(i){const{attribute:e,dispatchFormAction:t,kcClsx:n,displayableErrors:r,valueOrValues:o}=i;y(typeof o=="string");const l=o;return d.jsx("textarea",{id:e.name,name:e.name,className:n("kcInputClass"),"aria-invalid":r.length!==0,disabled:e.readOnly,cols:e.annotations.inputTypeCols===void 0?void 0:parseInt(`${e.annotations.inputTypeCols}`),rows:e.annotations.inputTypeRows===void 0?void 0:parseInt(`${e.annotations.inputTypeRows}`),maxLength:e.annotations.inputTypeMaxlength===void 0?void 0:parseInt(`${e.annotations.inputTypeMaxlength}`),value:l,onChange:u=>t({action:"update",name:e.name,valueOrValues:u.target.value}),onBlur:()=>t({action:"focus lost",name:e.name,fieldIndex:void 0})})}function se(i){const{attribute:e,dispatchFormAction:t,kcClsx:n,displayableErrors:r,i18n:o,valueOrValues:l}=i,u=e.annotations.inputType==="multiselect";return d.jsxs("select",{id:e.name,name:e.name,className:n("kcInputClass"),"aria-invalid":r.length!==0,disabled:e.readOnly,multiple:u,size:e.annotations.inputTypeSize===void 0?void 0:parseInt(`${e.annotations.inputTypeSize}`),value:l,onChange:a=>t({action:"update",name:e.name,valueOrValues:u?Array.from(a.target.selectedOptions).map(s=>s.value):a.target.value}),onBlur:()=>t({action:"focus lost",name:e.name,fieldIndex:void 0}),children:[!u&&d.jsx("option",{value:""}),(()=>{var s;e:{const{inputOptionsFromValidation:h}=e.annotations;if(h===void 0)break e;y(typeof h=="string");const c=e.validators[h];if(c===void 0||c.options===void 0)break e;return c.options}return((s=e.validators.options)==null?void 0:s.options)??[]})().map(s=>d.jsx("option",{value:s,children:U(o,e,s)},s))]})}function U(i,e,t){const{advancedMsg:n}=i;if(e.annotations.inputOptionLabels!==void 0){const{inputOptionLabels:r}=e.annotations;return n(r[t]??t)}return e.annotations.inputOptionLabelsI18nPrefix!==void 0?n(`${e.annotations.inputOptionLabelsI18nPrefix}.${t}`):t}export{ue as default};
